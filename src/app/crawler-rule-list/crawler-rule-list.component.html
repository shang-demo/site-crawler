<div class="container">
  <button md-raised-button [routerLink]=" ['/home'] "
          routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
    返回
  </button>
  <button md-raised-button [routerLink]=" ['/rule-detail'] "
          routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
    添加
  </button>
  <a md-raised-button href="{{serverUrl}}/api/v1/crawler-rule/export" target="_blank">
    导出
  </a>
  <a (click)="isShowImport=!isShowImport" md-raised-button>导入</a>
  <md-grid-list cols="5" *ngIf="isShowImport">
    <md-grid-tile colspan="4">
      <md-input-container style="width: 100%">
        <textarea rows="10" mdInput placeholder="JSON" [(ngModel)]="ruleListImport" #copyTarget></textarea>
      </md-input-container>
    </md-grid-tile>
    <md-grid-tile colspan="1">
      <a md-raised-button (click)="importRuleList()">确认导入</a>
    </md-grid-tile>
  </md-grid-list>

  <br>
  <br>
  <table class="table" align="center">
    <thead class="thead-default">
    <tr>
      <th>操作</th>
      <th>名称</th>
      <th>简介</th>
      <th>最后更新时间</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let rule of crawlerRules">
      <td>
        <md-checkbox (change)="toggle(rule)" [(ngModel)]="rule.isShowArticle">显示文章</md-checkbox>
        <!--<md-checkbox (change)="toggle(rule)" [(ngModel)]="rule.isCrawler">采集文章</md-checkbox>-->
      </td>
      <td scope="row">
        <button md-raised-button [routerLink]=" ['/rule-detail', rule.id] "
                routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
          {{rule.site || '-'}}
        </button>
      </td>
      <td>
        <a href="{{rule.href}}" target="_blank">{{rule.description}}</a>
      </td>
      <td class="time">
        <div [ngBusy]="ngBusy[rule.site]">
          {{rule.updatedAt | date : 'yy/MM/dd HH:mm:ss'}}
        </div>
      </td>
    </tr>
    </tbody>
  </table>


</div>